From 98ccfea048cb13fed6fe802e0c9bb98a288f8468 Mon Sep 17 00:00:00 2001
From: dirtyhank <dirtyhank@gmail.com>
Date: Thu, 14 Jan 2016 12:56:07 +0100
Subject: [PATCH]   CPU underclocking

  Based on underclocking to Nexus 6P by anarkia1976
---
 arch/arm/boot/dts/qcom/msm8992-regulator.dtsi |  6 +++---
 arch/arm/boot/dts/qcom/msm8992.dtsi           | 14 +++++++++++---
 2 files changed, 14 insertions(+), 6 deletions(-)

diff --git a/arch/arm/boot/dts/qcom/msm8992-regulator.dtsi b/arch/arm/boot/dts/qcom/msm8992-regulator.dtsi
index 54de2e3..faee27e 100644
--- a/arch/arm/boot/dts/qcom/msm8992-regulator.dtsi
+++ b/arch/arm/boot/dts/qcom/msm8992-regulator.dtsi
@@ -750,7 +750,7 @@
 		qcom,cpr-voltage-scaling-factor-max = <0 0 2000 2000>;
 		qcom,cpr-quot-adjust-scaling-factor-max = <0 2000 2000 2000>;
 		qcom,cpr-corner-frequency-map =
-				<1   300000000>,
+				<1   302400000>,
 				<2   384000000>,
 				<3   460800000>,
 				<4   600000000>,
@@ -898,8 +898,8 @@
 		qcom,cpr-voltage-scaling-factor-max = <0 0 2000 2000>;
 		qcom,cpr-quot-adjust-scaling-factor-max = <0 0 2000 2000>;
 		qcom,cpr-corner-frequency-map =
-				<1   300000000>, /* SVS Fmin for "SVS2" */
-				<2   300000000>,
+				<1   302400000>, /* SVS Fmin for "SVS2" */
+				<2   302400000>,
 				<3   384000000>,
 				<4   480000000>,
 				<5   633600000>,
diff --git a/arch/arm/boot/dts/qcom/msm8992.dtsi b/arch/arm/boot/dts/qcom/msm8992.dtsi
index 4ffbb34..5dedecb 100644
--- a/arch/arm/boot/dts/qcom/msm8992.dtsi
+++ b/arch/arm/boot/dts/qcom/msm8992.dtsi
@@ -720,7 +720,7 @@
 		governor = "cpufreq";
 		freq-tbl-khz =
 			<  134400 >,
-			<  300000 >,
+			<  302400 >,
 			<  384000 >,
 			<  556800 >,
 			<  600000 >,
@@ -780,7 +780,8 @@
 				< 1536000  7102 >,
 				< 1632000  7102 >;
 			cpu-to-dev-map-4 =
-				<  384000  1525 >,
+ 				<  302400  1525 >,
+ 				<  384000  1525 >,
 				<  633600  2288 >,
 				<  768000  3509 >,
 				<  864000  4173 >,
@@ -807,6 +808,7 @@
 		cci-cpufreq {
 			target-dev = <&cci_cache>;
 			cpu-to-dev-map-0 =
+				<  302400 134400 >,
 				<  384000 134400 >,
 				<  600000 300000 >,
 				<  787200 384000 >,
@@ -816,6 +818,7 @@
 				< 1536000 787200 >,
 				< 1632000 787200 >;
 			cpu-to-dev-map-4 =
+				<  302400 134400 >,
 				<  384000 134400 >,
 				<  480000 300000 >,
 				<  633600 384000 >,
@@ -843,6 +846,7 @@
 		qcom,governor-per-policy;
 
 		qcom,cpufreq-table-0 =
+			<  302400 >,
 			<  384000 >,
 			<  460800 >,
 			<  600000 >,
@@ -856,6 +860,7 @@
 			< 1632000 >;
 
 		qcom,cpufreq-table-4 =
+			<  302400 >,
 			<  384000 >,
 			<  480000 >,
 			<  633600 >,
@@ -890,6 +895,7 @@
 		vdd-dig-supply = <&pm8994_s2_corner_ao>;
 		qcom,a53-speedbin0-v0 =
 				<	   0 0>,
+				<  302400000 1>,
 				<  384000000 2>,
 				<  460800000 3>,
 				<  600000000 4>,
@@ -900,6 +906,7 @@
 				< 1248000000 9>;
 		qcom,a53-speedbin1-v0 =
 				<	   0 0>,
+				<  302400000 1>,
 				<  384000000 2>,
 				<  460800000 3>,
 				<  600000000 4>,
@@ -913,6 +920,7 @@
 				< 1632000000 12>;
 		qcom,a57-speedbin0-v0 =
 				<	   0 0>,
+				<  302400000 5>,
 				<  384000000 5>,
 				<  480000000 5>,
 				<  633600000 5>,
@@ -931,7 +939,7 @@
 		qcom,cci-speedbin0-v0 =
 				<	   0 0>,
 				<  134400000 2>,
-				<  300000000 4>,
+				<  302400000 4>,
 				<  384000000 6>,
 				<  556800000 6>,
 				<  600000000 8>,
