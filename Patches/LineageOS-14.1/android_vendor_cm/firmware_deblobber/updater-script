ui_print("DivestOS Firmware Deblobber");

set_metadata("/tmp/firmware_deblobber.sh", "uid", 0, "gid", 0, "mode", 0755);

unmount("/firmware");
mount("ext4", "EMMC", "/dev/block/bootdevice/by-name/modem", "/firmware", "");

run_program("/sbin/sh", "/tmp/firmware_deblobber.sh");

unmount("/firmware");

ui_print("Deblobbed!");
set_progress(1.000000);
