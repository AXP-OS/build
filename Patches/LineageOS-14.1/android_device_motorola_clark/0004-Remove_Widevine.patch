From 755b36c6f5e6feaac20112e0819299f63be3553d Mon Sep 17 00:00:00 2001
From: Tad <tad@spotco.us>
Date: Fri, 18 Nov 2016 18:22:00 -0500
Subject: [PATCH] Remove Widevine and disable DRM server

Change-Id: I24d3ba704d00d85747d851a9a497dd577ad03b5f
---
 Android.mk            | 10 +---------
 proprietary-files.txt |  2 --
 system.prop           |  2 +-
 3 files changed, 2 insertions(+), 12 deletions(-)

diff --git a/Android.mk b/Android.mk
index a69917c..693cba1 100644
--- a/Android.mk
+++ b/Android.mk
@@ -52,14 +52,6 @@ $(IMS_SYMLINKS): $(LOCAL_INSTALLED_MODULE)
 	@rm -rf $@
 	$(hide) ln -sf /system/vendor/lib64/$(notdir $@) $@
 
-WV_IMAGES := widevine.b00 widevine.b01 widevine.b02 widevine.b03 widevine.mdt
-WV_SYMLINKS := $(addprefix $(TARGET_OUT_ETC)/firmware/,$(notdir $(WV_IMAGES)))
-$(WV_SYMLINKS): $(LOCAL_INSTALLED_MODULE)
-	@echo "Widevine firmware link: $@"
-	@mkdir -p $(dir $@)
-	@rm -rf $@
-	$(hide) ln -sf /firmware/image/$(notdir $@) $@
-
 FIRMWARE_FILES := firmware fsg
 FIRMWARE_SYMLINKS := $(addprefix $(TARGET_OUT)/rfs/msm/mpss/readonly/,$(notdir $(FIRMWARE_FILES)))
 $(FIRMWARE_SYMLINKS): $(LOCAL_INSTALLED_MODULE)
@@ -68,6 +60,6 @@ $(FIRMWARE_SYMLINKS): $(LOCAL_INSTALLED_MODULE)
 	@rm -rf $@
 	$(hide) ln -sf /$(notdir $@) $@
 
-ALL_DEFAULT_INSTALLED_MODULES += $(PERSIST_WCNSS) $(WCNSS_CFG_INI) $(IMS_SYMLINKS) $(WV_SYMLINKS) $(FIRMWARE_SYMLINKS)
+ALL_DEFAULT_INSTALLED_MODULES += $(PERSIST_WCNSS) $(WCNSS_CFG_INI) $(IMS_SYMLINKS) $(FIRMWARE_SYMLINKS)
 
 endif
diff --git a/proprietary-files.txt b/proprietary-files.txt
index 3675ce9..45dd63b 100644
--- a/proprietary-files.txt
+++ b/proprietary-files.txt
@@ -293,8 +293,6 @@ vendor/lib64/libqti-iop-client.so
 # DRM
 # TZBSP
 bin/qseecomd
-etc/permissions/com.google.widevine.software.drm.xml
-framework/com.google.widevine.software.drm.jar
 lib/hw/keystore.qcom.so
 lib64/hw/keystore.qcom.so
 vendor/lib/libdrmfs.so
diff --git a/system.prop b/system.prop
index 6b1967c..4124bd4 100644
--- a/system.prop
+++ b/system.prop
@@ -56,7 +56,7 @@ dalvik.vm.dex2oat-threads=2
 dalvik.vm.image-dex2oat-threads=4
 
 # DRM
-drm.service.enabled=true
+drm.service.enabled=false
 
 # FM
 ro.fm.transmitter=false
-- 
2.9.3

