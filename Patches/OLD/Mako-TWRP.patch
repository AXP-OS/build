From f245b2d23f649928cb16e0e3ecf66891511f705d Mon Sep 17 00:00:00 2001
From: Tad <tad@spotco.us>
Date: Wed, 30 Dec 2015 14:20:30 -0500
Subject: [PATCH] Add TWRP

Change-Id: I9e6ff0717b0a5df908b771f50c62e21193c20ab4
---
 BoardConfig.mk | 16 ++++++++++++++++
 device.mk      |  1 +
 twrp.fstab     |  6 ++++++
 3 files changed, 23 insertions(+)
 create mode 100644 twrp.fstab

diff --git a/BoardConfig.mk b/BoardConfig.mk
index d8d9f5c..753f7e8 100644
--- a/BoardConfig.mk
+++ b/BoardConfig.mk
@@ -129,6 +129,22 @@ MALLOC_IMPL := dlmalloc
 
 -include vendor/lge/mako/BoardConfigVendor.mk
 
+#TWRP config
+DEVICE_RESOLUTION := 720x1280
+RECOVERY_SDCARD_ON_DATA := true
+RECOVERY_GRAPHICS_USE_LINELENGTH := true
+BOARD_HAS_NO_REAL_SDCARD := true
+PRODUCT_BUILD_PROP_OVERRIDES += BUILD_UTC_DATE=0
+#TW_INCLUDE_CRYPTO := true
+TW_INCLUDE_JB_CRYPTO := true
+TW_FLASH_FROM_STORAGE := true
+TW_NO_USB_STORAGE := true
+TW_INTERNAL_STORAGE_PATH := "/data/media"
+TW_INTERNAL_STORAGE_MOUNT_POINT := "data"
+TW_EXTERNAL_STORAGE_PATH := "/usb-otg"
+TW_EXTERNAL_STORAGE_MOUNT_POINT := "usb-otg"
+TW_SIGNED_ZIP_VERIFY := true
+
 BOARD_HAS_NO_SELECT_BUTTON := true
 
 BOARD_HARDWARE_CLASS := device/lge/mako/cmhw/
diff --git a/device.mk b/device.mk
index 8b300f2..b2dc8ac 100644
--- a/device.mk
+++ b/device.mk
@@ -62,6 +62,7 @@ PRODUCT_COPY_FILES += \
 	device/lge/mako/init.mako.rc:root/init.mako.rc \
 	device/lge/mako/init.mako.usb.rc:root/init.mako.usb.rc \
 	device/lge/mako/fstab.mako:root/fstab.mako \
+	device/lge/mako/twrp.fstab:root/etc/twrp.fstab \
 	device/lge/mako/ueventd.mako.rc:root/ueventd.mako.rc \
 	device/lge/mako/media_profiles.xml:system/etc/media_profiles.xml \
 	frameworks/av/media/libstagefright/data/media_codecs_google_audio.xml:system/etc/media_codecs_google_audio.xml \
diff --git a/twrp.fstab b/twrp.fstab
new file mode 100644
index 0000000..4c95eba
--- /dev/null
+++ b/twrp.fstab
@@ -0,0 +1,6 @@
+/boot       emmc        /dev/block/platform/msm_sdcc.1/by-name/boot
+/recovery   emmc        /dev/block/platform/msm_sdcc.1/by-name/recovery
+/system     ext4        /dev/block/platform/msm_sdcc.1/by-name/system
+/data       ext4        /dev/block/platform/msm_sdcc.1/by-name/userdata     length=-16384
+/cache      ext4        /dev/block/platform/msm_sdcc.1/by-name/cache
+
-- 
2.6.4

